# Benchmarks

Command used: `FFT_BENCH_MAX=32768 GOAMD64=v3 go test -tags=asm -bench . -benchmem ./bench`

Notes:

- Results are from the latest local run.
- `algo-fft` benchmarks include both complex128 and complex64.
- `go-fftw` (FFTW3) is used as the **baseline** for comparison.
- `go-fftw` requires FFTW shared libraries.
- `go-dsp-fft` allocates on every call (no reusable plan).
- **Speedup** shows performance relative to go-fftw baseline (higher is better).

## FFT Benchmarks

### Baseline: go-fftw (FFTW3)

| Size  | ns/op  | MB/s | B/op | allocs/op |
| ----- | ------ | ---- | ---- | --------- |
| 8     | 152    | 840  | 0    | 0         |
| 16    | 337    | 761  | 0    | 0         |
| 32    | 284    | 1802 | 0    | 0         |
| 64    | 448    | 2287 | 0    | 0         |
| 128   | 867    | 2361 | 0    | 0         |
| 256   | 803    | 5100 | 0    | 0         |
| 512   | 1621   | 5055 | 0    | 0         |
| 1024  | 5546   | 2954 | 0    | 0         |
| 2048  | 13741  | 2385 | 0    | 0         |
| 4096  | 46213  | 1418 | 0    | 0         |
| 8192  | 105013 | 1248 | 0    | 0         |
| 16384 | 219849 | 1192 | 0    | 0         |
| 32768 | 317874 | 1649 | 0    | 0         |

### algo-fft

| Size  | ns/op   | Speedup vs baseline | MB/s | B/op   | allocs/op |
| ----- | ------- | ------------------- | ---- | ------ | --------- |
| 8     | 49.02   | **3.11x**           | 2611 | 0      | 0         |
| 16    | 173     | **1.95x**           | 1481 | 0      | 0         |
| 32    | 272     | **1.04x**           | 1880 | 0      | 0         |
| 64    | 636     | 0.70x               | 1611 | 0      | 0         |
| 128   | 5100    | 0.17x               | 402  | 0      | 0         |
| 256   | 2703    | 0.30x               | 1515 | 0      | 0         |
| 512   | 8566    | 0.19x               | 956  | 0      | 0         |
| 1024  | 19978   | 0.28x               | 820  | 0      | 0         |
| 2048  | 55344   | 0.25x               | 592  | 0      | 0         |
| 4096  | 248697  | 0.19x               | 264  | 0      | 0         |
| 8192  | 473020  | 0.22x               | 277  | 131072 | 1         |
| 16384 | 585129  | 0.38x               | 448  | 0      | 0         |
| 32768 | 1021280 | 0.31x               | 513  | 948    | 0         |

### go-dsp-fft

| Size  | ns/op   | Speedup vs baseline | MB/s  | B/op    | allocs/op |
| ----- | ------- | ------------------- | ----- | ------- | --------- |
| 8     | 14109   | 0.01x               | 9.07  | 739     | 17        |
| 16    | 25355   | 0.01x               | 10.1  | 1186    | 25        |
| 32    | 16437   | 0.02x               | 31.15 | 2076    | 41        |
| 64    | 33642   | 0.01x               | 30.44 | 3409    | 44        |
| 128   | 50400   | 0.02x               | 40.63 | 6308    | 57        |
| 256   | 55773   | 0.01x               | 73.44 | 11714   | 67        |
| 512   | 58656   | 0.03x               | 140   | 22677   | 80        |
| 1024  | 132435  | 0.04x               | 124   | 43850   | 91        |
| 2048  | 483419  | 0.03x               | 67.78 | 85777   | 104       |
| 4096  | 579078  | 0.08x               | 113   | 165835  | 115       |
| 8192  | 972051  | 0.11x               | 135   | 329899  | 128       |
| 16384 | 1066934 | 0.21x               | 246   | 657748  | 139       |
| 32768 | 5460574 | 0.06x               | 96.01 | 1313344 | 152       |

### gonum

| Size  | ns/op   | Speedup vs baseline | MB/s | B/op | allocs/op |
| ----- | ------- | ------------------- | ---- | ---- | --------- |
| 8     | 275     | 0.55x               | 465  | 0    | 0         |
| 16    | 570     | 0.59x               | 449  | 0    | 0         |
| 32    | 1065    | 0.27x               | 481  | 0    | 0         |
| 64    | 2756    | 0.16x               | 372  | 0    | 0         |
| 128   | 17396   | 0.05x               | 118  | 0    | 0         |
| 256   | 9326    | 0.09x               | 439  | 0    | 0         |
| 512   | 23580   | 0.07x               | 347  | 0    | 0         |
| 1024  | 93805   | 0.06x               | 175  | 0    | 0         |
| 2048  | 246848  | 0.06x               | 133  | 0    | 0         |
| 4096  | 276570  | 0.17x               | 237  | 0    | 0         |
| 8192  | 778074  | 0.13x               | 168  | 0    | 0         |
| 16384 | 999644  | 0.22x               | 262  | 0    | 0         |
| 32768 | 3405619 | 0.09x               | 154  | 0    | 0         |

### takatoh

| Size  | ns/op    | Speedup vs baseline | MB/s  | B/op   | allocs/op |
| ----- | -------- | ------------------- | ----- | ------ | --------- |
| 8     | 1128     | 0.14x               | 114   | 128    | 1         |
| 16    | 2454     | 0.14x               | 104   | 256    | 1         |
| 32    | 3798     | 0.07x               | 135   | 512    | 1         |
| 64    | 16868    | 0.03x               | 60.71 | 1024   | 1         |
| 128   | 37850    | 0.02x               | 54.11 | 2048   | 1         |
| 256   | 43085    | 0.02x               | 95.07 | 4096   | 1         |
| 512   | 138251   | 0.01x               | 59.25 | 8192   | 1         |
| 1024  | 370070   | 0.01x               | 44.27 | 16384  | 1         |
| 2048  | 859457   | 0.02x               | 38.13 | 32768  | 1         |
| 4096  | 1084244  | 0.04x               | 60.44 | 65536  | 1         |
| 8192  | 2482223  | 0.04x               | 52.8  | 131072 | 1         |
| 16384 | 4327785  | 0.05x               | 60.57 | 262144 | 1         |
| 32768 | 17994200 | 0.02x               | 29.14 | 524288 | 1         |

## FFT32 Benchmarks

### algo-fft

| Size  | ns/op   | MB/s | B/op | allocs/op |
| ----- | ------- | ---- | ---- | --------- |
| 8     | 36.38   | 1759 | 0    | 0         |
| 16    | 112     | 1146 | 0    | 0         |
| 32    | 322     | 795  | 0    | 0         |
| 64    | 802     | 638  | 0    | 0         |
| 128   | 2669    | 384  | 0    | 0         |
| 256   | 3929    | 521  | 0    | 0         |
| 512   | 10740   | 381  | 0    | 0         |
| 1024  | 26253   | 312  | 0    | 0         |
| 2048  | 76009   | 216  | 0    | 0         |
| 4096  | 150186  | 218  | 0    | 0         |
| 8192  | 419358  | 156  | 0    | 0         |
| 16384 | 1085401 | 121  | 0    | 0         |
| 32768 | 1832156 | 143  | 0    | 0         |

## IFFT Benchmarks

### Baseline: go-fftw (FFTW3)

| Size  | ns/op  | MB/s | B/op | allocs/op |
| ----- | ------ | ---- | ---- | --------- |
| 8     | 81.35  | 1573 | 0    | 0         |
| 16    | 191    | 1341 | 0    | 0         |
| 32    | 115    | 4452 | 0    | 0         |
| 64    | 159    | 6433 | 0    | 0         |
| 128   | 254    | 8048 | 0    | 0         |
| 256   | 616    | 6655 | 0    | 0         |
| 512   | 939    | 8726 | 0    | 0         |
| 1024  | 2206   | 7428 | 0    | 0         |
| 2048  | 9445   | 3469 | 0    | 0         |
| 4096  | 22354  | 2932 | 0    | 0         |
| 8192  | 96403  | 1360 | 0    | 0         |
| 16384 | 191539 | 1369 | 0    | 0         |
| 32768 | 397004 | 1321 | 0    | 0         |

### algo-fft (IFFT)

| Size  | ns/op   | Speedup vs baseline | MB/s | B/op   | allocs/op |
| ----- | ------- | ------------------- | ---- | ------ | --------- |
| 8     | 33.65   | **2.42x**           | 3804 | 0      | 0         |
| 16    | 108     | **1.77x**           | 2376 | 0      | 0         |
| 32    | 232     | 0.50x               | 2207 | 0      | 0         |
| 64    | 367     | 0.43x               | 2791 | 0      | 0         |
| 128   | 1119    | 0.23x               | 1830 | 0      | 0         |
| 256   | 1905    | 0.32x               | 2150 | 0      | 0         |
| 512   | 5262    | 0.18x               | 1557 | 0      | 0         |
| 1024  | 12383   | 0.18x               | 1323 | 0      | 0         |
| 2048  | 25883   | 0.36x               | 1266 | 0      | 0         |
| 4096  | 102669  | 0.22x               | 638  | 0      | 0         |
| 8192  | 325564  | 0.30x               | 403  | 131072 | 1         |
| 16384 | 669543  | 0.29x               | 392  | 0      | 0         |
| 32768 | 1538695 | 0.26x               | 341  | 1      | 0         |

### go-dsp-fft (IFFT)

| Size  | ns/op   | Speedup vs baseline | MB/s  | B/op    | allocs/op |
| ----- | ------- | ------------------- | ----- | ------- | --------- |
| 8     | 8500    | 0.01x               | 15.06 | 870     | 18        |
| 16    | 9132    | 0.02x               | 28.03 | 1435    | 26        |
| 32    | 14325   | 0.01x               | 35.74 | 2589    | 42        |
| 64    | 18222   | 0.01x               | 56.2  | 4430    | 45        |
| 128   | 24853   | 0.01x               | 82.41 | 8353    | 58        |
| 256   | 38991   | 0.02x               | 105   | 15815   | 68        |
| 512   | 69054   | 0.01x               | 119   | 30873   | 81        |
| 1024  | 104725  | 0.02x               | 156   | 60240   | 92        |
| 2048  | 213643  | 0.04x               | 153   | 118565  | 105       |
| 4096  | 396690  | 0.06x               | 165   | 231396  | 116       |
| 8192  | 773972  | 0.12x               | 169   | 460970  | 129       |
| 16384 | 1650420 | 0.12x               | 159   | 919899  | 140       |
| 32768 | 2833001 | 0.14x               | 185   | 1837667 | 153       |

### gonum (IFFT)

| Size  | ns/op   | Speedup vs baseline | MB/s | B/op | allocs/op |
| ----- | ------- | ------------------- | ---- | ---- | --------- |
| 8     | 195     | 0.42x               | 656  | 0    | 0         |
| 16    | 253     | 0.76x               | 1013 | 0    | 0         |
| 32    | 696     | 0.17x               | 736  | 0    | 0         |
| 64    | 1150    | 0.14x               | 891  | 0    | 0         |
| 128   | 3438    | 0.07x               | 596  | 0    | 0         |
| 256   | 6358    | 0.10x               | 644  | 0    | 0         |
| 512   | 18036   | 0.05x               | 454  | 0    | 0         |
| 1024  | 33903   | 0.07x               | 483  | 0    | 0         |
| 2048  | 118482  | 0.08x               | 277  | 0    | 0         |
| 4096  | 233733  | 0.10x               | 280  | 0    | 0         |
| 8192  | 534196  | 0.18x               | 245  | 0    | 0         |
| 16384 | 1293520 | 0.15x               | 203  | 0    | 0         |
| 32768 | 2671983 | 0.15x               | 196  | 0    | 0         |

### takatoh (IFFT)

| Size  | ns/op    | Speedup vs baseline | MB/s  | B/op    | allocs/op |
| ----- | -------- | ------------------- | ----- | ------- | --------- |
| 8     | 578      | 0.14x               | 222   | 256     | 2         |
| 16    | 1188     | 0.16x               | 215   | 512     | 2         |
| 32    | 3098     | 0.04x               | 165   | 1024    | 2         |
| 64    | 6770     | 0.02x               | 151   | 2048    | 2         |
| 128   | 14724    | 0.02x               | 139   | 4096    | 2         |
| 256   | 33837    | 0.02x               | 121   | 8192    | 2         |
| 512   | 65323    | 0.01x               | 125   | 16384   | 2         |
| 1024  | 165629   | 0.01x               | 98.92 | 32768   | 2         |
| 2048  | 419918   | 0.02x               | 78.03 | 65536   | 2         |
| 4096  | 1069932  | 0.02x               | 61.25 | 131072  | 2         |
| 8192  | 2115875  | 0.05x               | 61.95 | 262144  | 2         |
| 16384 | 5817477  | 0.03x               | 45.06 | 524288  | 2         |
| 32768 | 11396522 | 0.03x               | 46    | 1048576 | 2         |

## IFFT32 Benchmarks

### algo-fft

| Size  | ns/op   | MB/s | B/op | allocs/op |
| ----- | ------- | ---- | ---- | --------- |
| 8     | 44.45   | 1440 | 0    | 0         |
| 16    | 116     | 1106 | 0    | 0         |
| 32    | 321     | 797  | 0    | 0         |
| 64    | 1058    | 484  | 0    | 0         |
| 128   | 2547    | 402  | 0    | 0         |
| 256   | 3936    | 520  | 0    | 0         |
| 512   | 8859    | 462  | 0    | 0         |
| 1024  | 28168   | 291  | 0    | 0         |
| 2048  | 40682   | 403  | 0    | 0         |
| 4096  | 113423  | 289  | 0    | 0         |
| 8192  | 499092  | 131  | 0    | 0         |
| 16384 | 997429  | 131  | 0    | 0         |
| 32768 | 1534809 | 171  | 0    | 0         |
