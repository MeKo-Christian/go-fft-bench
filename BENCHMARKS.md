# Benchmarks

Command used: `FFT_BENCH_MAX=32768 GOAMD64=v3 go test -tags=asm -bench . -benchmem ./bench`

Notes:

- Results are from the latest local run.
- `algo-fft` benchmarks include both complex128 and complex64.
- `go-fftw` (FFTW3) is used as the **baseline** for comparison.
- `go-fftw` requires FFTW shared libraries.
- `go-dsp-fft` allocates on every call (no reusable plan).
- **Speedup** shows performance relative to go-fftw baseline (higher is better).

## FFT Benchmarks

### Baseline: go-fftw (FFTW3)

| Size  | ns/op  | MB/s     | B/op | allocs/op |
| ----- | ------ | -------- | ---- | --------- |
| 8     | 53.93  | 2373     | 0    | 0         |
| 16    | 60.65  | 4221     | 0    | 0         |
| 32    | 76.54  | 6689     | 0    | 0         |
| 64    | 104.9  | 9757     | 0    | 0         |
| 128   | 162    | 12641    | 0    | 0         |
| 256   | 306.7  | 13352    | 0    | 0         |
| 512   | 637.5  | 12850    | 0    | 0         |
| 1024  | 1384   | 11836    | 0    | 0         |
| 2048  | 3347   | 9790     | 0    | 0         |
| 4096  | 11502  | 5697     | 0    | 0         |
| 8192  | 27909  | 4696     | 0    | 0         |
| 16384 | 59226  | 4426     | 0    | 0         |
| 32768 | 125089 | 4191     | 0    | 0         |

### algo-fft

| Size  | ns/op  | Speedup vs baseline | MB/s     | B/op   | allocs/op |
| ----- | ------ | ------------------- | -------- | ------ | --------- |
| 8     | 7.88   | **6.84x**           | 16233    | 0      | 0         |
| 16    | 28.87  | **2.10x**           | 8868     | 0      | 0         |
| 32    | 67.85  | **1.13x**           | 7545     | 0      | 0         |
| 64    | 225.3  | 0.47x               | 4544     | 0      | 0         |
| 128   | 466.7  | 0.35x               | 4388     | 0      | 0         |
| 256   | 1087   | 0.28x               | 3768     | 0      | 0         |
| 512   | 2184   | 0.29x               | 3751     | 0      | 0         |
| 1024  | 4757   | 0.29x               | 3444     | 0      | 0         |
| 2048  | 10787  | 0.31x               | 3037     | 0      | 0         |
| 4096  | 45141  | 0.25x               | 1451     | 0      | 0         |
| 8192  | 54603  | 0.51x               | 2400     | 0      | 0         |
| 16384 | 116647 | 0.51x               | 2247     | 0      | 0         |
| 32768 | 581956 | 0.21x               | 900.9    | 598    | 1         |

### go-dsp-fft

| Size  | ns/op  | Speedup vs baseline | MB/s     | B/op   | allocs/op |
| ----- | ------ | ------------------- | -------- | ------ | --------- |
| 8     | 5093   | 0.01x               | 25.13    | 735    | 17        |
| 16    | 6596   | 0.01x               | 38.81    | 1179   | 25        |
| 32    | 9401   | 0.01x               | 54.46    | 2076   | 41        |
| 64    | 13840  | 0.01x               | 73.99    | 3405   | 44        |
| 128   | 18129  | 0.01x               | 113.0    | 6304   | 57        |
| 256   | 27123  | 0.01x               | 151.0    | 11715  | 67        |
| 512   | 42676  | 0.01x               | 192.0    | 22681  | 80        |
| 1024  | 70702  | 0.02x               | 231.7    | 43854  | 91        |
| 2048  | 120924 | 0.03x               | 271.0    | 85796  | 104       |
| 4096  | 242208 | 0.05x               | 270.6    | 165852 | 115       |
| 8192  | 473610 | 0.06x               | 276.8    | 329912 | 128       |
| 16384 | 774321 | 0.08x               | 338.6    | 657781 | 139       |
| 32768 | 1487074 | 0.08x               | 352.6    | 1313358 | 152       |

### gonum

| Size  | ns/op  | Speedup vs baseline | MB/s     | B/op   | allocs/op |
| ----- | ------ | ------------------- | -------- | ------ | --------- |
| 8     | 107.9  | 0.50x               | 1186     | 0      | 0         |
| 16    | 176.1  | 0.34x               | 1453     | 0      | 0         |
| 32    | 471.7  | 0.16x               | 1085     | 0      | 0         |
| 64    | 1112   | 0.09x               | 920.8    | 0      | 0         |
| 128   | 2151   | 0.08x               | 952.2    | 0      | 0         |
| 256   | 4132   | 0.07x               | 991.2    | 0      | 0         |
| 512   | 10735  | 0.06x               | 763.1    | 0      | 0         |
| 1024  | 22172  | 0.06x               | 739.0    | 0      | 0         |
| 2048  | 50883  | 0.07x               | 644.0    | 0      | 0         |
| 4096  | 103373 | 0.11x               | 634.0    | 0      | 0         |
| 8192  | 246132 | 0.11x               | 532.5    | 0      | 0         |
| 16384 | 495801 | 0.12x               | 528.7    | 0      | 0         |
| 32768 | 1277167 | 0.10x               | 410.5    | 0      | 0         |

### takatoh

| Size  | ns/op  | Speedup vs baseline | MB/s     | B/op   | allocs/op |
| ----- | ------ | ------------------- | -------- | ------ | --------- |
| 8     | 311.8  | 0.17x               | 410.5    | 128    | 1         |
| 16    | 758.8  | 0.08x               | 337.4    | 256    | 1         |
| 32    | 1785   | 0.04x               | 286.8    | 512    | 1         |
| 64    | 4039   | 0.03x               | 253.6    | 1024   | 1         |
| 128   | 9043   | 0.02x               | 226.5    | 2048   | 1         |
| 256   | 18629  | 0.02x               | 219.9    | 4096   | 1         |
| 512   | 42542  | 0.01x               | 192.6    | 8192   | 1         |
| 1024  | 87379  | 0.02x               | 187.5    | 16384  | 1         |
| 2048  | 209106 | 0.02x               | 156.7    | 32768  | 1         |
| 4096  | 413121 | 0.03x               | 158.6    | 65536  | 1         |
| 8192  | 945740 | 0.03x               | 138.6    | 131072 | 1         |
| 16384 | 1868695 | 0.03x               | 140.3    | 262144 | 1         |
| 32768 | 4231770 | 0.03x               | 123.9    | 524288 | 1         |

## IFFT Benchmarks

### Baseline: go-fftw (FFTW3)

| Size  | ns/op  | MB/s     | B/op | allocs/op |
| ----- | ------ | -------- | ---- | --------- |
| 8     | 79.66  | 1606     | 0    | 0         |
| 16    | 70.11  | 3651     | 0    | 0         |
| 32    | 86.51  | 5918     | 0    | 0         |
| 64    | 105.3  | 9726     | 0    | 0         |
| 128   | 161.9  | 12649    | 0    | 0         |
| 256   | 357.3  | 11462    | 0    | 0         |
| 512   | 674.6  | 12142    | 0    | 0         |
| 1024  | 1573   | 10415    | 0    | 0         |
| 2048  | 3432   | 9546     | 0    | 0         |
| 4096  | 10109  | 6483     | 0    | 0         |
| 8192  | 28221  | 4644     | 0    | 0         |
| 16384 | 58080  | 4513     | 0    | 0         |
| 32768 | 127643 | 4107     | 0    | 0         |

### algo-fft

| Size  | ns/op  | Speedup vs baseline | MB/s     | B/op   | allocs/op |
| ----- | ------ | ------------------- | -------- | ------ | --------- |
| 8     | 10.74  | **7.42x**           | 11913    | 0      | 0         |
| 16    | 33.31  | **2.10x**           | 7684     | 0      | 0         |
| 32    | 81.51  | **1.06x**           | 6281     | 0      | 0         |
| 64    | 224.3  | 0.47x               | 4565     | 0      | 0         |
| 128   | 530.2  | 0.31x               | 3862     | 0      | 0         |
| 256   | 1163   | 0.31x               | 3520     | 0      | 0         |
| 512   | 3038   | 0.22x               | 2696     | 0      | 0         |
| 1024  | 5521   | 0.28x               | 2967     | 0      | 0         |
| 2048  | 11238  | 0.31x               | 2915     | 0      | 0         |
| 4096  | 48245  | 0.21x               | 1358     | 0      | 0         |
| 8192  | 57423  | 0.49x               | 2282     | 0      | 0         |
| 16384 | 120477 | 0.48x               | 2175     | 0      | 0         |
| 32768 | 600948 | 0.21x               | 872.4    | 32     | 1         |

### go-dsp-fft (IFFT)

| Size  | ns/op  | Speedup vs baseline | MB/s     | B/op   | allocs/op |
| ----- | ------ | ------------------- | -------- | ------ | --------- |
| 8     | 6291   | 0.01x               | 20.35    | 858    | 18        |
| 16    | 8306   | 0.01x               | 30.82    | 1435   | 26        |
| 32    | 11535  | 0.01x               | 44.39    | 2588   | 42        |
| 64    | 13327  | 0.01x               | 76.84    | 4429   | 45        |
| 128   | 19710  | 0.01x               | 103.9    | 8352   | 58        |
| 256   | 32282  | 0.01x               | 126.9    | 15813  | 68        |
| 512   | 48502  | 0.01x               | 168.9    | 30874  | 81        |
| 1024  | 84299  | 0.02x               | 194.4    | 60238  | 92        |
| 2048  | 138701 | 0.02x               | 236.2    | 118561 | 105       |
| 4096  | 271839 | 0.04x               | 241.1    | 231388 | 116       |
| 8192  | 539129 | 0.05x               | 243.1    | 460986 | 129       |
| 16384 | 999818 | 0.06x               | 262.2    | 919936 | 140       |
| 32768 | 1834865 | 0.07x               | 285.7    | 1837663 | 153       |

### gonum (IFFT)

| Size  | ns/op  | Speedup vs baseline | MB/s     | B/op   | allocs/op |
| ----- | ------ | ------------------- | -------- | ------ | --------- |
| 8     | 107.4  | 0.74x               | 1192     | 0      | 0         |
| 16    | 219    | 0.32x               | 1168     | 0      | 0         |
| 32    | 493.4  | 0.18x               | 1037     | 0      | 0         |
| 64    | 1182   | 0.09x               | 866.5    | 0      | 0         |
| 128   | 1999   | 0.08x               | 1024     | 0      | 0         |
| 256   | 4251   | 0.08x               | 963.6    | 0      | 0         |
| 512   | 12222  | 0.06x               | 670.3    | 0      | 0         |
| 1024  | 21219  | 0.07x               | 772.1    | 0      | 0         |
| 2048  | 50194  | 0.07x               | 652.8    | 0      | 0         |
| 4096  | 107417 | 0.09x               | 610.1    | 0      | 0         |
| 8192  | 241894 | 0.12x               | 541.9    | 0      | 0         |
| 16384 | 487053 | 0.12x               | 538.2    | 0      | 0         |
| 32768 | 1109147 | 0.12x               | 472.7    | 0      | 0         |

### takatoh (IFFT)

| Size  | ns/op  | Speedup vs baseline | MB/s     | B/op   | allocs/op |
| ----- | ------ | ------------------- | -------- | ------ | --------- |
| 8     | 367    | 0.22x               | 348.8    | 256    | 2         |
| 16    | 842.3  | 0.08x               | 303.9    | 512    | 2         |
| 32    | 1768   | 0.05x               | 289.6    | 1024   | 2         |
| 64    | 4099   | 0.03x               | 249.8    | 2048   | 2         |
| 128   | 9691   | 0.02x               | 211.3    | 4096   | 2         |
| 256   | 23902  | 0.01x               | 171.4    | 8192   | 2         |
| 512   | 48697  | 0.01x               | 168.2    | 16384  | 2         |
| 1024  | 98424  | 0.02x               | 166.5    | 32768  | 2         |
| 2048  | 209858 | 0.02x               | 156.1    | 65536  | 2         |
| 4096  | 438630 | 0.02x               | 149.4    | 131072 | 2         |
| 8192  | 986533 | 0.03x               | 132.9    | 262144 | 2         |
| 16384 | 2000879 | 0.03x               | 131.0    | 524288 | 2         |
| 32768 | 4311591 | 0.03x               | 121.6    | 1048576 | 2         |

## FFT32 Benchmarks

### Error: Baseline library 'go-fftw' not found

## IFFT32 Benchmarks

### Error: Baseline library 'go-fftw' not found

